<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.5, user-scalable=yes">
    <title>Card Preview</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            background-color: transparent;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        .scene {
            margin: 0;
            transform: scale(0.85); /* Scale to fit standard phone width better */
        }
        /* Hide backface for simple view */
        .card-back {
            display: none;
        }
        .card {
             /* Force no rotation initially */
             transform: rotateY(0deg) !important;
        }
    </style>
</head>
<body>

    <div class="scene">
        <div class="card" id="cardElement">
            <div class="card-face card-front">
                <div class="rarity-overlay"></div>
                <div class="card-frame-content">
                    <div class="card-top-header">
                        <div class="card-name-box" id="cardName">Card Name</div>
                        <div class="card-attribute-box" id="cardAttribute">?</div>
                    </div>
                    <div class="card-image-wrapper">
                         <div class="card-art-div" id="cardArt"></div>
                    </div>
                    <div class="card-info-box">
                        <div class="card-type" id="cardType">Type</div>
                        <div class="card-desc-text" id="cardDesc">Description goes here...</div>
                        <div class="card-stats">
                            <span>ATK/ <span id="cardAtk">0</span></span>
                            <span>DEF/ <span id="cardDef">0</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function renderCard(jsonString) {
            try {
                const data = JSON.parse(jsonString);

                // Set Text Content
                document.getElementById('cardName').textContent = data.name || "Unknown";
                document.getElementById('cardDesc').textContent = data.description || "";
                document.getElementById('cardAtk').textContent = data.atk || "0";
                document.getElementById('cardDef').textContent = data.def || "0";

                // Rarity Logic
                const rarity = (data.rarity || "N").toUpperCase();
                document.getElementById('cardAttribute').textContent = rarity;

                const cardEl = document.getElementById('cardElement');
                cardEl.className = "card"; // Reset

                // Add Rarity Class
                cardEl.classList.add("rarity-" + rarity.toLowerCase());

                // Add Theme Class
                if (data.color_theme) {
                    cardEl.classList.add(data.color_theme);
                }

                // Add Effect Class
                if (data.effect_type) {
                    cardEl.classList.add(data.effect_type);
                }

                // Set Image
                // In Android, we will pass base64 data uri for the image
                if (data.image_data) {
                    document.getElementById('cardArt').style.backgroundImage = "url('" + data.image_data + "')";
                }

                // Trigger Summoning Animation
                // Remove class then add it back to restart animation
                cardEl.classList.remove("is-summoning");
                void cardEl.offsetWidth; // Trigger reflow
                cardEl.classList.add("is-summoning");

            } catch (e) {
                console.error(e);
                document.getElementById('cardName').textContent = "Error: " + e.message;
            }
        }
    </script>
</body>
</html>
